"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
(() => {
var exports = {};
exports.id = "pages/api/magic/popularAgents";
exports.ids = ["pages/api/magic/popularAgents"];
exports.modules = {

/***/ "firebase-admin":
/*!*********************************!*\
  !*** external "firebase-admin" ***!
  \*********************************/
/***/ ((module) => {

module.exports = require("firebase-admin");

/***/ }),

/***/ "next/dist/compiled/next-server/pages-api.runtime.dev.js":
/*!**************************************************************************!*\
  !*** external "next/dist/compiled/next-server/pages-api.runtime.dev.js" ***!
  \**************************************************************************/
/***/ ((module) => {

module.exports = require("next/dist/compiled/next-server/pages-api.runtime.dev.js");

/***/ }),

/***/ "@vercel/edge-config":
/*!**************************************!*\
  !*** external "@vercel/edge-config" ***!
  \**************************************/
/***/ ((module) => {

module.exports = import("@vercel/edge-config");;

/***/ }),

/***/ "(api)/./node_modules/next/dist/build/webpack/loaders/next-route-loader/index.js?kind=PAGES_API&page=%2Fapi%2Fmagic%2FpopularAgents&preferredRegion=&absolutePagePath=.%2Fsrc%2Fpages%2Fapi%2Fmagic%2FpopularAgents.ts&middlewareConfigBase64=e30%3D!":
/*!******************************************************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/next/dist/build/webpack/loaders/next-route-loader/index.js?kind=PAGES_API&page=%2Fapi%2Fmagic%2FpopularAgents&preferredRegion=&absolutePagePath=.%2Fsrc%2Fpages%2Fapi%2Fmagic%2FpopularAgents.ts&middlewareConfigBase64=e30%3D! ***!
  \******************************************************************************************************************************************************************************************************************************************************/
/***/ ((module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.a(module, async (__webpack_handle_async_dependencies__, __webpack_async_result__) => { try {\n__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   config: () => (/* binding */ config),\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__),\n/* harmony export */   routeModule: () => (/* binding */ routeModule)\n/* harmony export */ });\n/* harmony import */ var next_dist_server_future_route_modules_pages_api_module_compiled__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/dist/server/future/route-modules/pages-api/module.compiled */ \"(api)/./node_modules/next/dist/server/future/route-modules/pages-api/module.compiled.js\");\n/* harmony import */ var next_dist_server_future_route_modules_pages_api_module_compiled__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_future_route_modules_pages_api_module_compiled__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! next/dist/server/future/route-kind */ \"(api)/./node_modules/next/dist/server/future/route-kind.js\");\n/* harmony import */ var next_dist_build_templates_helpers__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! next/dist/build/templates/helpers */ \"(api)/./node_modules/next/dist/build/templates/helpers.js\");\n/* harmony import */ var _src_pages_api_magic_popularAgents_ts__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./src/pages/api/magic/popularAgents.ts */ \"(api)/./src/pages/api/magic/popularAgents.ts\");\nvar __webpack_async_dependencies__ = __webpack_handle_async_dependencies__([_src_pages_api_magic_popularAgents_ts__WEBPACK_IMPORTED_MODULE_3__]);\n_src_pages_api_magic_popularAgents_ts__WEBPACK_IMPORTED_MODULE_3__ = (__webpack_async_dependencies__.then ? (await __webpack_async_dependencies__)() : __webpack_async_dependencies__)[0];\n\n\n\n// Import the userland code.\n\n// Re-export the handler (should be the default export).\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = ((0,next_dist_build_templates_helpers__WEBPACK_IMPORTED_MODULE_2__.hoist)(_src_pages_api_magic_popularAgents_ts__WEBPACK_IMPORTED_MODULE_3__, \"default\"));\n// Re-export config.\nconst config = (0,next_dist_build_templates_helpers__WEBPACK_IMPORTED_MODULE_2__.hoist)(_src_pages_api_magic_popularAgents_ts__WEBPACK_IMPORTED_MODULE_3__, \"config\");\n// Create and export the route module that will be consumed.\nconst routeModule = new next_dist_server_future_route_modules_pages_api_module_compiled__WEBPACK_IMPORTED_MODULE_0__.PagesAPIRouteModule({\n    definition: {\n        kind: next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__.RouteKind.PAGES_API,\n        page: \"/api/magic/popularAgents\",\n        pathname: \"/api/magic/popularAgents\",\n        // The following aren't used in production.\n        bundlePath: \"\",\n        filename: \"\"\n    },\n    userland: _src_pages_api_magic_popularAgents_ts__WEBPACK_IMPORTED_MODULE_3__\n});\n\n//# sourceMappingURL=pages-api.js.map\n__webpack_async_result__();\n} catch(e) { __webpack_async_result__(e); } });//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwaSkvLi9ub2RlX21vZHVsZXMvbmV4dC9kaXN0L2J1aWxkL3dlYnBhY2svbG9hZGVycy9uZXh0LXJvdXRlLWxvYWRlci9pbmRleC5qcz9raW5kPVBBR0VTX0FQSSZwYWdlPSUyRmFwaSUyRm1hZ2ljJTJGcG9wdWxhckFnZW50cyZwcmVmZXJyZWRSZWdpb249JmFic29sdXRlUGFnZVBhdGg9LiUyRnNyYyUyRnBhZ2VzJTJGYXBpJTJGbWFnaWMlMkZwb3B1bGFyQWdlbnRzLnRzJm1pZGRsZXdhcmVDb25maWdCYXNlNjQ9ZTMwJTNEISIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7OztBQUFzRztBQUN2QztBQUNMO0FBQzFEO0FBQ21FO0FBQ25FO0FBQ0EsaUVBQWUsd0VBQUssQ0FBQyxrRUFBUSxZQUFZLEVBQUM7QUFDMUM7QUFDTyxlQUFlLHdFQUFLLENBQUMsa0VBQVE7QUFDcEM7QUFDTyx3QkFBd0IsZ0hBQW1CO0FBQ2xEO0FBQ0EsY0FBYyx5RUFBUztBQUN2QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMLFlBQVk7QUFDWixDQUFDOztBQUVELHFDIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vdHlwZW1hZ2ljLWFpLz82NmQ1Il0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IFBhZ2VzQVBJUm91dGVNb2R1bGUgfSBmcm9tIFwibmV4dC9kaXN0L3NlcnZlci9mdXR1cmUvcm91dGUtbW9kdWxlcy9wYWdlcy1hcGkvbW9kdWxlLmNvbXBpbGVkXCI7XG5pbXBvcnQgeyBSb3V0ZUtpbmQgfSBmcm9tIFwibmV4dC9kaXN0L3NlcnZlci9mdXR1cmUvcm91dGUta2luZFwiO1xuaW1wb3J0IHsgaG9pc3QgfSBmcm9tIFwibmV4dC9kaXN0L2J1aWxkL3RlbXBsYXRlcy9oZWxwZXJzXCI7XG4vLyBJbXBvcnQgdGhlIHVzZXJsYW5kIGNvZGUuXG5pbXBvcnQgKiBhcyB1c2VybGFuZCBmcm9tIFwiLi9zcmMvcGFnZXMvYXBpL21hZ2ljL3BvcHVsYXJBZ2VudHMudHNcIjtcbi8vIFJlLWV4cG9ydCB0aGUgaGFuZGxlciAoc2hvdWxkIGJlIHRoZSBkZWZhdWx0IGV4cG9ydCkuXG5leHBvcnQgZGVmYXVsdCBob2lzdCh1c2VybGFuZCwgXCJkZWZhdWx0XCIpO1xuLy8gUmUtZXhwb3J0IGNvbmZpZy5cbmV4cG9ydCBjb25zdCBjb25maWcgPSBob2lzdCh1c2VybGFuZCwgXCJjb25maWdcIik7XG4vLyBDcmVhdGUgYW5kIGV4cG9ydCB0aGUgcm91dGUgbW9kdWxlIHRoYXQgd2lsbCBiZSBjb25zdW1lZC5cbmV4cG9ydCBjb25zdCByb3V0ZU1vZHVsZSA9IG5ldyBQYWdlc0FQSVJvdXRlTW9kdWxlKHtcbiAgICBkZWZpbml0aW9uOiB7XG4gICAgICAgIGtpbmQ6IFJvdXRlS2luZC5QQUdFU19BUEksXG4gICAgICAgIHBhZ2U6IFwiL2FwaS9tYWdpYy9wb3B1bGFyQWdlbnRzXCIsXG4gICAgICAgIHBhdGhuYW1lOiBcIi9hcGkvbWFnaWMvcG9wdWxhckFnZW50c1wiLFxuICAgICAgICAvLyBUaGUgZm9sbG93aW5nIGFyZW4ndCB1c2VkIGluIHByb2R1Y3Rpb24uXG4gICAgICAgIGJ1bmRsZVBhdGg6IFwiXCIsXG4gICAgICAgIGZpbGVuYW1lOiBcIlwiXG4gICAgfSxcbiAgICB1c2VybGFuZFxufSk7XG5cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPXBhZ2VzLWFwaS5qcy5tYXAiXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(api)/./node_modules/next/dist/build/webpack/loaders/next-route-loader/index.js?kind=PAGES_API&page=%2Fapi%2Fmagic%2FpopularAgents&preferredRegion=&absolutePagePath=.%2Fsrc%2Fpages%2Fapi%2Fmagic%2FpopularAgents.ts&middlewareConfigBase64=e30%3D!\n");

/***/ }),

/***/ "(api)/./src/pages/api/api-utils/db.ts":
/*!***************************************!*\
  !*** ./src/pages/api/api-utils/db.ts ***!
  \***************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   admin: () => (/* reexport default from dynamic */ firebase_admin__WEBPACK_IMPORTED_MODULE_0___default.a),\n/* harmony export */   db: () => (/* binding */ db),\n/* harmony export */   getUserIdForEmail: () => (/* binding */ getUserIdForEmail),\n/* harmony export */   verifyIdToken: () => (/* binding */ verifyIdToken)\n/* harmony export */ });\n/* harmony import */ var firebase_admin__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! firebase-admin */ \"firebase-admin\");\n/* harmony import */ var firebase_admin__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(firebase_admin__WEBPACK_IMPORTED_MODULE_0__);\n\n// Note re. the private key formatting: https://github.com/gladly-team/next-firebase-auth/discussions/95#discussioncomment-2891225\nlet serviceAccount = {\n    type: \"service_account\",\n    project_id: process.env.FIREBASE_PROJECT_ID,\n    private_key_id: process.env.FIREBASE_PRIVATE_KEY_ID,\n    privateKey: process.env.FIREBASE_PRIVATE_KEY ? process.env.FIREBASE_PRIVATE_KEY.replace(/\\\\n/gm, \"\\n\") : undefined,\n    client_email: \"firebase-adminsdk-z0cf9@typemagic-18c6c.iam.gserviceaccount.com\",\n    client_id: \"111905503050827831487\",\n    auth_uri: \"https://accounts.google.com/o/oauth2/auth\",\n    token_uri: \"https://oauth2.googleapis.com/token\",\n    auth_provider_x509_cert_url: \"https://www.googleapis.com/oauth2/v1/certs\",\n    client_x509_cert_url: \"https://www.googleapis.com/robot/v1/metadata/x509/firebase-adminsdk-z0cf9%40typemagic-18c6c.iam.gserviceaccount.com\"\n};\nif ((firebase_admin__WEBPACK_IMPORTED_MODULE_0___default().apps).length === 0) {\n    firebase_admin__WEBPACK_IMPORTED_MODULE_0___default().initializeApp({\n        credential: firebase_admin__WEBPACK_IMPORTED_MODULE_0___default().credential.cert(serviceAccount)\n    });\n}\nconst db = firebase_admin__WEBPACK_IMPORTED_MODULE_0___default().firestore();\ntry {\n    db.settings({\n        ignoreUndefinedProperties: true\n    });\n} catch (e) {}\nconst verifyIdToken = async (idToken)=>{\n    let userId = undefined;\n    try {\n        const decodedToken = await firebase_admin__WEBPACK_IMPORTED_MODULE_0___default().auth().verifyIdToken(idToken);\n        userId = decodedToken.uid;\n    } catch (error) {\n        return undefined;\n    }\n    return userId;\n};\nconst getUserIdForEmail = async (email)=>{\n    const snapshot = await db.collection(\"users\").where(\"email\", \"==\", email).get();\n    if (snapshot.empty) {\n        console.log(\"dafuq, no user? \", email);\n        return undefined;\n    }\n    const userId = snapshot.docs[0].id;\n    return userId;\n};\n\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwaSkvLi9zcmMvcGFnZXMvYXBpL2FwaS11dGlscy9kYi50cyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7QUFBbUM7QUFFbkMsa0lBQWtJO0FBQ2xJLElBQUlDLGlCQUFpQjtJQUNuQkMsTUFBTTtJQUNOQyxZQUFZQyxRQUFRQyxHQUFHLENBQUNDLG1CQUFtQjtJQUMzQ0MsZ0JBQWdCSCxRQUFRQyxHQUFHLENBQUNHLHVCQUF1QjtJQUNuREMsWUFBWUwsUUFBUUMsR0FBRyxDQUFDSyxvQkFBb0IsR0FDeENOLFFBQVFDLEdBQUcsQ0FBQ0ssb0JBQW9CLENBQUNDLE9BQU8sQ0FBQyxTQUFTLFFBQ2xEQztJQUNKQyxjQUNFO0lBQ0ZDLFdBQVc7SUFDWEMsVUFBVTtJQUNWQyxXQUFXO0lBQ1hDLDZCQUE2QjtJQUM3QkMsc0JBQ0U7QUFDSjtBQUNBLElBQUlsQiw0REFBVSxDQUFDb0IsTUFBTSxLQUFLLEdBQUc7SUFDM0JwQixtRUFBbUIsQ0FBQztRQUNsQnNCLFlBQVl0QixnRUFBZ0IsQ0FBQ3VCLElBQUksQ0FBQ3RCO0lBQ3BDO0FBQ0Y7QUFFQSxNQUFNdUIsS0FBS3hCLCtEQUFlO0FBRTFCLElBQUk7SUFDRndCLEdBQUdFLFFBQVEsQ0FBQztRQUFFQywyQkFBMkI7SUFBSztBQUNoRCxFQUFFLE9BQU9DLEdBQUcsQ0FBQztBQUVOLE1BQU1DLGdCQUFnQixPQUFPQztJQUNsQyxJQUFJQyxTQUFTbkI7SUFDYixJQUFJO1FBQ0YsTUFBTW9CLGVBQWUsTUFBTWhDLDBEQUFVLEdBQUc2QixhQUFhLENBQUNDO1FBQ3REQyxTQUFTQyxhQUFhRSxHQUFHO0lBQzNCLEVBQUUsT0FBT0MsT0FBTztRQUNkLE9BQU92QjtJQUNUO0lBQ0EsT0FBT21CO0FBQ1QsRUFBRTtBQUVLLE1BQU1LLG9CQUFvQixPQUFPQztJQUN0QyxNQUFNQyxXQUFXLE1BQU1kLEdBQ3BCZSxVQUFVLENBQUMsU0FDWEMsS0FBSyxDQUFDLFNBQVMsTUFBTUgsT0FDckJJLEdBQUc7SUFFTixJQUFJSCxTQUFTSSxLQUFLLEVBQUU7UUFDbEJDLFFBQVFDLEdBQUcsQ0FBQyxvQkFBb0JQO1FBQ2hDLE9BQU96QjtJQUNUO0lBQ0EsTUFBTW1CLFNBQVNPLFNBQVNPLElBQUksQ0FBQyxFQUFFLENBQUNDLEVBQUU7SUFDbEMsT0FBT2Y7QUFDVCxFQUFFO0FBRW1CIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vdHlwZW1hZ2ljLWFpLy4vc3JjL3BhZ2VzL2FwaS9hcGktdXRpbHMvZGIudHM/YTIxMyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgYWRtaW4gZnJvbSBcImZpcmViYXNlLWFkbWluXCI7XG5cbi8vIE5vdGUgcmUuIHRoZSBwcml2YXRlIGtleSBmb3JtYXR0aW5nOiBodHRwczovL2dpdGh1Yi5jb20vZ2xhZGx5LXRlYW0vbmV4dC1maXJlYmFzZS1hdXRoL2Rpc2N1c3Npb25zLzk1I2Rpc2N1c3Npb25jb21tZW50LTI4OTEyMjVcbmxldCBzZXJ2aWNlQWNjb3VudCA9IHtcbiAgdHlwZTogXCJzZXJ2aWNlX2FjY291bnRcIixcbiAgcHJvamVjdF9pZDogcHJvY2Vzcy5lbnYuRklSRUJBU0VfUFJPSkVDVF9JRCxcbiAgcHJpdmF0ZV9rZXlfaWQ6IHByb2Nlc3MuZW52LkZJUkVCQVNFX1BSSVZBVEVfS0VZX0lELFxuICBwcml2YXRlS2V5OiBwcm9jZXNzLmVudi5GSVJFQkFTRV9QUklWQVRFX0tFWVxuICAgID8gcHJvY2Vzcy5lbnYuRklSRUJBU0VfUFJJVkFURV9LRVkucmVwbGFjZSgvXFxcXG4vZ20sIFwiXFxuXCIpXG4gICAgOiB1bmRlZmluZWQsXG4gIGNsaWVudF9lbWFpbDpcbiAgICBcImZpcmViYXNlLWFkbWluc2RrLXowY2Y5QHR5cGVtYWdpYy0xOGM2Yy5pYW0uZ3NlcnZpY2VhY2NvdW50LmNvbVwiLFxuICBjbGllbnRfaWQ6IFwiMTExOTA1NTAzMDUwODI3ODMxNDg3XCIsXG4gIGF1dGhfdXJpOiBcImh0dHBzOi8vYWNjb3VudHMuZ29vZ2xlLmNvbS9vL29hdXRoMi9hdXRoXCIsXG4gIHRva2VuX3VyaTogXCJodHRwczovL29hdXRoMi5nb29nbGVhcGlzLmNvbS90b2tlblwiLFxuICBhdXRoX3Byb3ZpZGVyX3g1MDlfY2VydF91cmw6IFwiaHR0cHM6Ly93d3cuZ29vZ2xlYXBpcy5jb20vb2F1dGgyL3YxL2NlcnRzXCIsXG4gIGNsaWVudF94NTA5X2NlcnRfdXJsOlxuICAgIFwiaHR0cHM6Ly93d3cuZ29vZ2xlYXBpcy5jb20vcm9ib3QvdjEvbWV0YWRhdGEveDUwOS9maXJlYmFzZS1hZG1pbnNkay16MGNmOSU0MHR5cGVtYWdpYy0xOGM2Yy5pYW0uZ3NlcnZpY2VhY2NvdW50LmNvbVwiLFxufTtcbmlmIChhZG1pbi5hcHBzLmxlbmd0aCA9PT0gMCkge1xuICBhZG1pbi5pbml0aWFsaXplQXBwKHtcbiAgICBjcmVkZW50aWFsOiBhZG1pbi5jcmVkZW50aWFsLmNlcnQoc2VydmljZUFjY291bnQgYXMgYWRtaW4uU2VydmljZUFjY291bnQpLFxuICB9KTtcbn1cblxuY29uc3QgZGIgPSBhZG1pbi5maXJlc3RvcmUoKTtcblxudHJ5IHtcbiAgZGIuc2V0dGluZ3MoeyBpZ25vcmVVbmRlZmluZWRQcm9wZXJ0aWVzOiB0cnVlIH0pO1xufSBjYXRjaCAoZSkge31cblxuZXhwb3J0IGNvbnN0IHZlcmlmeUlkVG9rZW4gPSBhc3luYyAoaWRUb2tlbjogc3RyaW5nKSA9PiB7XG4gIGxldCB1c2VySWQgPSB1bmRlZmluZWQ7XG4gIHRyeSB7XG4gICAgY29uc3QgZGVjb2RlZFRva2VuID0gYXdhaXQgYWRtaW4uYXV0aCgpLnZlcmlmeUlkVG9rZW4oaWRUb2tlbik7XG4gICAgdXNlcklkID0gZGVjb2RlZFRva2VuLnVpZDtcbiAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICByZXR1cm4gdW5kZWZpbmVkO1xuICB9XG4gIHJldHVybiB1c2VySWQ7XG59O1xuXG5leHBvcnQgY29uc3QgZ2V0VXNlcklkRm9yRW1haWwgPSBhc3luYyAoZW1haWw6IHN0cmluZykgPT4ge1xuICBjb25zdCBzbmFwc2hvdCA9IGF3YWl0IGRiXG4gICAgLmNvbGxlY3Rpb24oXCJ1c2Vyc1wiKVxuICAgIC53aGVyZShcImVtYWlsXCIsIFwiPT1cIiwgZW1haWwpXG4gICAgLmdldCgpO1xuXG4gIGlmIChzbmFwc2hvdC5lbXB0eSkge1xuICAgIGNvbnNvbGUubG9nKFwiZGFmdXEsIG5vIHVzZXI/IFwiLCBlbWFpbCk7XG4gICAgcmV0dXJuIHVuZGVmaW5lZDtcbiAgfVxuICBjb25zdCB1c2VySWQgPSBzbmFwc2hvdC5kb2NzWzBdLmlkO1xuICByZXR1cm4gdXNlcklkO1xufTtcblxuZXhwb3J0IHsgZGIsIGFkbWluIH07XG4iXSwibmFtZXMiOlsiYWRtaW4iLCJzZXJ2aWNlQWNjb3VudCIsInR5cGUiLCJwcm9qZWN0X2lkIiwicHJvY2VzcyIsImVudiIsIkZJUkVCQVNFX1BST0pFQ1RfSUQiLCJwcml2YXRlX2tleV9pZCIsIkZJUkVCQVNFX1BSSVZBVEVfS0VZX0lEIiwicHJpdmF0ZUtleSIsIkZJUkVCQVNFX1BSSVZBVEVfS0VZIiwicmVwbGFjZSIsInVuZGVmaW5lZCIsImNsaWVudF9lbWFpbCIsImNsaWVudF9pZCIsImF1dGhfdXJpIiwidG9rZW5fdXJpIiwiYXV0aF9wcm92aWRlcl94NTA5X2NlcnRfdXJsIiwiY2xpZW50X3g1MDlfY2VydF91cmwiLCJhcHBzIiwibGVuZ3RoIiwiaW5pdGlhbGl6ZUFwcCIsImNyZWRlbnRpYWwiLCJjZXJ0IiwiZGIiLCJmaXJlc3RvcmUiLCJzZXR0aW5ncyIsImlnbm9yZVVuZGVmaW5lZFByb3BlcnRpZXMiLCJlIiwidmVyaWZ5SWRUb2tlbiIsImlkVG9rZW4iLCJ1c2VySWQiLCJkZWNvZGVkVG9rZW4iLCJhdXRoIiwidWlkIiwiZXJyb3IiLCJnZXRVc2VySWRGb3JFbWFpbCIsImVtYWlsIiwic25hcHNob3QiLCJjb2xsZWN0aW9uIiwid2hlcmUiLCJnZXQiLCJlbXB0eSIsImNvbnNvbGUiLCJsb2ciLCJkb2NzIiwiaWQiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(api)/./src/pages/api/api-utils/db.ts\n");

/***/ }),

/***/ "(api)/./src/pages/api/magic/popularAgents.ts":
/*!**********************************************!*\
  !*** ./src/pages/api/magic/popularAgents.ts ***!
  \**********************************************/
/***/ ((module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.a(module, async (__webpack_handle_async_dependencies__, __webpack_async_result__) => { try {\n__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony import */ var _vercel_edge_config__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @vercel/edge-config */ \"@vercel/edge-config\");\n/* harmony import */ var _api_utils_db__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../api-utils/db */ \"(api)/./src/pages/api/api-utils/db.ts\");\nvar __webpack_async_dependencies__ = __webpack_handle_async_dependencies__([_vercel_edge_config__WEBPACK_IMPORTED_MODULE_0__]);\n_vercel_edge_config__WEBPACK_IMPORTED_MODULE_0__ = (__webpack_async_dependencies__.then ? (await __webpack_async_dependencies__)() : __webpack_async_dependencies__)[0];\n\n\nconst handler = async (req, res)=>{\n    let { idToken, prompt } = req.body;\n    let popularAgents = await (0,_vercel_edge_config__WEBPACK_IMPORTED_MODULE_0__.get)(\"popularAgents\");\n    if (!popularAgents) {\n        return res.status(400).send(\"No popular agents found\");\n    }\n    // OK, now fetch the agents for these popular agents:\n    let agents = [];\n    console.log(\"popularAgents\", popularAgents);\n    await _api_utils_db__WEBPACK_IMPORTED_MODULE_1__.db.collection(\"agents\").where(\"isPublic\", \"==\", true).where(\"id\", \"in\", popularAgents).get().then((querySnapshot)=>{\n        const agentMap = {};\n        querySnapshot.forEach((doc)=>{\n            console.log(\"Got doc: \", doc.data().name);\n            agentMap[doc.id] = {\n                id: doc.id,\n                ...doc.data()\n            };\n        });\n        agents = popularAgents.map((id)=>agentMap[id]).filter((a)=>!!a);\n    });\n    res.status(200).send(agents);\n};\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (handler);\n\n__webpack_async_result__();\n} catch(e) { __webpack_async_result__(e); } });//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwaSkvLi9zcmMvcGFnZXMvYXBpL21hZ2ljL3BvcHVsYXJBZ2VudHMudHMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7O0FBRzBDO0FBRUw7QUFHckMsTUFBTUUsVUFBVSxPQUFPQyxLQUFvQkM7SUFDekMsSUFBSSxFQUFFQyxPQUFPLEVBQUVDLE1BQU0sRUFBRSxHQUFHSCxJQUFJSSxJQUFJO0lBS2xDLElBQUlDLGdCQUFpQixNQUFNUix3REFBR0EsQ0FBQztJQUUvQixJQUFJLENBQUNRLGVBQWU7UUFDbEIsT0FBT0osSUFBSUssTUFBTSxDQUFDLEtBQUtDLElBQUksQ0FBQztJQUM5QjtJQUVBLHFEQUFxRDtJQUNyRCxJQUFJQyxTQUFrQixFQUFFO0lBRXhCQyxRQUFRQyxHQUFHLENBQUMsaUJBQWlCTDtJQUU3QixNQUFNUCw2Q0FBRUEsQ0FDTGEsVUFBVSxDQUFDLFVBQ1hDLEtBQUssQ0FBQyxZQUFZLE1BQU0sTUFDeEJBLEtBQUssQ0FBQyxNQUFNLE1BQU1QLGVBQ2xCUixHQUFHLEdBQ0hnQixJQUFJLENBQUMsQ0FBQ0M7UUFDTCxNQUFNQyxXQUFvQyxDQUFDO1FBQzNDRCxjQUFjRSxPQUFPLENBQUMsQ0FBQ0M7WUFDckJSLFFBQVFDLEdBQUcsQ0FBQyxhQUFhTyxJQUFJQyxJQUFJLEdBQUdDLElBQUk7WUFDeENKLFFBQVEsQ0FBQ0UsSUFBSUcsRUFBRSxDQUFDLEdBQUc7Z0JBQUVBLElBQUlILElBQUlHLEVBQUU7Z0JBQUUsR0FBR0gsSUFBSUMsSUFBSSxFQUFFO1lBQUM7UUFDakQ7UUFDQVYsU0FBU0gsY0FBY2dCLEdBQUcsQ0FBQyxDQUFDRCxLQUFPTCxRQUFRLENBQUNLLEdBQUcsRUFBRUUsTUFBTSxDQUFDLENBQUNDLElBQU0sQ0FBQyxDQUFDQTtJQUNuRTtJQUVGdEIsSUFBSUssTUFBTSxDQUFDLEtBQUtDLElBQUksQ0FBQ0M7QUFDdkI7QUFFQSxpRUFBZVQsT0FBT0EsRUFBQyIsInNvdXJjZXMiOlsid2VicGFjazovL3R5cGVtYWdpYy1haS8uL3NyYy9wYWdlcy9hcGkvbWFnaWMvcG9wdWxhckFnZW50cy50cz84NjBkIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IEFnZW50LCBVc2VyUGxhbkluZm8gfSBmcm9tIFwiQC91dGlscy90eXBlc1wiO1xuaW1wb3J0IHsgT3BlbkFJU3RyZWFtIH0gZnJvbSBcIi4uL2FwaS11dGlscy9vcGVuQUlTdHJlYW1cIjtcbmltcG9ydCB7IGt2IH0gZnJvbSBcIkB2ZXJjZWwva3ZcIjtcbmltcG9ydCB7IGdldCB9IGZyb20gXCJAdmVyY2VsL2VkZ2UtY29uZmlnXCI7XG5pbXBvcnQgeyBOZXh0UmVxdWVzdCB9IGZyb20gXCJuZXh0L3NlcnZlclwiO1xuaW1wb3J0IHsgZGIgfSBmcm9tIFwiLi4vYXBpLXV0aWxzL2RiXCI7XG5pbXBvcnQgeyBWZXJjZWxSZXF1ZXN0LCBWZXJjZWxSZXNwb25zZSB9IGZyb20gXCJAdmVyY2VsL25vZGVcIjtcblxuY29uc3QgaGFuZGxlciA9IGFzeW5jIChyZXE6IFZlcmNlbFJlcXVlc3QsIHJlczogVmVyY2VsUmVzcG9uc2UpID0+IHtcbiAgbGV0IHsgaWRUb2tlbiwgcHJvbXB0IH0gPSByZXEuYm9keSBhcyB7XG4gICAgcHJvbXB0OiBzdHJpbmc7XG4gICAgaWRUb2tlbjogc3RyaW5nO1xuICB9O1xuXG4gIGxldCBwb3B1bGFyQWdlbnRzID0gKGF3YWl0IGdldChcInBvcHVsYXJBZ2VudHNcIikpIGFzIHN0cmluZ1tdO1xuXG4gIGlmICghcG9wdWxhckFnZW50cykge1xuICAgIHJldHVybiByZXMuc3RhdHVzKDQwMCkuc2VuZChcIk5vIHBvcHVsYXIgYWdlbnRzIGZvdW5kXCIpO1xuICB9XG5cbiAgLy8gT0ssIG5vdyBmZXRjaCB0aGUgYWdlbnRzIGZvciB0aGVzZSBwb3B1bGFyIGFnZW50czpcbiAgbGV0IGFnZW50czogQWdlbnRbXSA9IFtdO1xuXG4gIGNvbnNvbGUubG9nKFwicG9wdWxhckFnZW50c1wiLCBwb3B1bGFyQWdlbnRzKTtcblxuICBhd2FpdCBkYlxuICAgIC5jb2xsZWN0aW9uKFwiYWdlbnRzXCIpXG4gICAgLndoZXJlKFwiaXNQdWJsaWNcIiwgXCI9PVwiLCB0cnVlKVxuICAgIC53aGVyZShcImlkXCIsIFwiaW5cIiwgcG9wdWxhckFnZW50cylcbiAgICAuZ2V0KClcbiAgICAudGhlbigocXVlcnlTbmFwc2hvdCkgPT4ge1xuICAgICAgY29uc3QgYWdlbnRNYXA6IHsgW2lkOiBzdHJpbmddOiBBZ2VudCB9ID0ge307XG4gICAgICBxdWVyeVNuYXBzaG90LmZvckVhY2goKGRvYykgPT4ge1xuICAgICAgICBjb25zb2xlLmxvZyhcIkdvdCBkb2M6IFwiLCBkb2MuZGF0YSgpLm5hbWUpO1xuICAgICAgICBhZ2VudE1hcFtkb2MuaWRdID0geyBpZDogZG9jLmlkLCAuLi5kb2MuZGF0YSgpIH0gYXMgQWdlbnQ7XG4gICAgICB9KTtcbiAgICAgIGFnZW50cyA9IHBvcHVsYXJBZ2VudHMubWFwKChpZCkgPT4gYWdlbnRNYXBbaWRdKS5maWx0ZXIoKGEpID0+ICEhYSk7XG4gICAgfSk7XG5cbiAgcmVzLnN0YXR1cygyMDApLnNlbmQoYWdlbnRzKTtcbn07XG5cbmV4cG9ydCBkZWZhdWx0IGhhbmRsZXI7XG4iXSwibmFtZXMiOlsiZ2V0IiwiZGIiLCJoYW5kbGVyIiwicmVxIiwicmVzIiwiaWRUb2tlbiIsInByb21wdCIsImJvZHkiLCJwb3B1bGFyQWdlbnRzIiwic3RhdHVzIiwic2VuZCIsImFnZW50cyIsImNvbnNvbGUiLCJsb2ciLCJjb2xsZWN0aW9uIiwid2hlcmUiLCJ0aGVuIiwicXVlcnlTbmFwc2hvdCIsImFnZW50TWFwIiwiZm9yRWFjaCIsImRvYyIsImRhdGEiLCJuYW1lIiwiaWQiLCJtYXAiLCJmaWx0ZXIiLCJhIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(api)/./src/pages/api/magic/popularAgents.ts\n");

/***/ })

};
;

// load runtime
var __webpack_require__ = require("../../../webpack-api-runtime.js");
__webpack_require__.C(exports);
var __webpack_exec__ = (moduleId) => (__webpack_require__(__webpack_require__.s = moduleId))
var __webpack_exports__ = __webpack_require__.X(0, ["vendor-chunks/next"], () => (__webpack_exec__("(api)/./node_modules/next/dist/build/webpack/loaders/next-route-loader/index.js?kind=PAGES_API&page=%2Fapi%2Fmagic%2FpopularAgents&preferredRegion=&absolutePagePath=.%2Fsrc%2Fpages%2Fapi%2Fmagic%2FpopularAgents.ts&middlewareConfigBase64=e30%3D!")));
module.exports = __webpack_exports__;

})();